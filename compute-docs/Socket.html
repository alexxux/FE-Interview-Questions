<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>一、I/O 模型 | FE-Interview</title>
    <meta name="description" content="前端面试题整理">
    <link rel="icon" href="/FE-Interview-Questions/logo.png">
  <link rel="manifest" href="/FE-Interview-Questions/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="/FE-Interview-Questions/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/FE-Interview-Questions/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
  <meta name="apple-mobile-web-app-status-bar-style">
  <script src="https://my.openwrite.cn/js/readmore.js"></script>
  <script src="https://blog.poetries.top/img-repo/2020/06/openwrite.js"></script>
    
    <link rel="preload" href="/FE-Interview-Questions/assets/css/0.styles.1f0a3964.css" as="style"><link rel="preload" href="/FE-Interview-Questions/assets/js/app.db76d58b.js" as="script"><link rel="preload" href="/FE-Interview-Questions/assets/js/4.c04b79e0.js" as="script"><link rel="preload" href="/FE-Interview-Questions/assets/js/2.6d7b907f.js" as="script"><link rel="preload" href="/FE-Interview-Questions/assets/js/119.db2335be.js" as="script"><link rel="preload" href="/FE-Interview-Questions/assets/js/10.a6113989.js" as="script"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/100.d8067be8.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/101.a350090f.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/102.dd74bb0b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/103.96e85615.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/104.8860fe8d.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/105.5060449e.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/106.52f3543d.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/107.eed2df48.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/108.f5eeeaec.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/109.63cfc223.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/11.8f0af893.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/110.9cedbff1.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/111.15d2c791.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/112.d9f2e8f3.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/113.943a191d.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/114.327256d7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/115.73f265a7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/116.77f3ad0e.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/117.b527f1f7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/118.fc8cde8c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/12.92da9ba8.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/120.b1576b0c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/121.65f83d4e.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/122.1b4fb96b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/123.fd228163.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/124.17100659.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/125.f70ea742.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/126.2cc5797b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/127.67bdfa22.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/128.e6fa4e06.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/129.fc38e456.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/13.bf32b537.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/130.196d2d45.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/131.a7a27c39.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/132.ec094691.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/133.be442aff.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/134.54997737.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/135.b7f19c4c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/136.64fd8a5d.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/137.8002f20d.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/138.9f806bc0.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/139.b1978d99.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/14.e928c43f.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/140.6796c6cb.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/141.238c5e80.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/142.1eb05585.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/143.95e4e51e.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/144.41763415.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/145.7e36ac48.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/146.8fe19c11.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/147.385f98d4.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/148.ae2fbb65.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/149.07af4eb2.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/15.d09fa1de.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/150.e5b13f42.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/151.0d853dc4.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/152.d011cfc2.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/153.a2419345.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/154.a75123f9.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/155.f94a2c94.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/156.d6adaa5c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/157.6db8644a.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/158.3c5f0c43.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/159.c82432ec.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/16.8babaffc.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/160.a6ac1263.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/161.44254eeb.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/162.45fbaca0.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/163.adbeb165.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/164.9bd328e7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/165.0d3f47c3.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/166.3a662c5e.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/167.197c69aa.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/168.8d4f086d.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/169.9bc47c36.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/17.ac70b66c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/170.5972aaeb.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/171.dfbe6b8b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/172.45601684.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/173.7b096e5a.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/174.b77855de.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/175.d0652087.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/176.fb152190.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/177.347d78f7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/178.370bd0ac.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/179.7b1c1eb1.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/18.b75d0e84.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/180.a70c954b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/181.fa4c4400.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/182.c9cb10be.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/183.c78b1c44.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/184.c89e7418.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/185.640e69ab.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/186.ca1a9ef5.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/187.8efba6e0.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/188.6ca64a3b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/189.f608d52f.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/19.d5c58541.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/190.d57f3eb5.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/191.a05c25fd.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/192.8be51b8b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/193.032bfc6a.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/194.589d39ef.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/195.62e7d5e7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/196.8651830d.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/197.e1b86448.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/198.8b50cd19.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/199.1e15584e.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/20.05b0c9ba.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/200.53f5e6c1.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/201.f0ee6522.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/202.39471620.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/203.9ac66be9.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/204.b754f56f.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/205.f834c2b1.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/206.b424070c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/207.57a310e0.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/208.46099ca8.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/209.719b4ed4.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/21.3739c65e.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/210.2203edd6.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/211.b3e70b29.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/212.ca435277.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/213.0ecfbb57.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/214.a35a177a.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/215.56309ccd.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/216.0fbe2d67.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/217.4fa39004.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/218.cf1b8f6f.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/219.a6919e1b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/22.cb64eeee.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/220.6be08e86.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/221.6e66b328.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/222.3d3343c7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/223.bca62ea0.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/224.d88fe7a3.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/225.0605fdbb.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/226.f09683a7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/227.c47f8cb3.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/228.4a8c85cd.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/229.d415dabe.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/23.c9028c2f.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/230.956b8a54.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/231.b42d888f.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/232.608af160.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/233.9f4d04a5.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/234.62b5dbac.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/235.880f1ca0.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/236.5a388fcc.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/237.01850bc1.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/238.e1f1a57d.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/239.782f9411.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/24.06c566b5.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/240.e1277e81.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/241.47d108f4.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/242.789ff694.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/243.8cfee24b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/244.db2ca944.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/245.177cdaa7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/246.c0e8dc1f.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/247.06761326.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/248.0575b514.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/249.663ef673.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/25.f585ddec.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/26.967aab3f.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/27.939f8629.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/28.eb79ae67.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/29.f4263a91.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/3.0a1241ca.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/30.27bff004.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/31.06bac762.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/32.a2b81321.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/33.59705419.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/34.2b11800c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/35.20aab597.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/36.de271854.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/37.e14393c9.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/38.a3f56ee3.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/39.5d4a9057.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/40.97cfc1b8.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/41.bb336619.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/42.45f8294b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/43.be8ac190.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/44.07951d1f.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/45.0c1a236c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/46.337aed96.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/47.8a57fa26.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/48.983f89bf.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/49.756f0064.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/5.4cc33d6b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/50.e7c2d109.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/51.7bad69c7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/52.2868dc1d.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/53.554023f8.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/54.f7078d5d.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/55.61ea7e68.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/56.0db38d73.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/57.af65a382.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/58.2a8ddf87.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/59.21046427.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/6.e415a690.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/60.5f39aadd.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/61.5b17645c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/62.5030544b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/63.031693d7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/64.ea4631f2.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/65.3018f7b0.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/66.66704c7f.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/67.da2445c5.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/68.dab9c344.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/69.f3c09412.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/7.49472306.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/70.96ee9389.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/71.a70685e7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/72.95721f6c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/73.61f63e51.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/74.f97b569c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/75.29575c33.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/76.a3d16b7d.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/77.b6794428.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/78.566b5c94.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/79.bc8dafa1.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/8.2c95c703.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/80.5cbe4251.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/81.994d7780.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/82.555fb672.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/83.bb39d3fc.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/84.1466543b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/85.778c0670.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/86.d3b75428.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/87.9cc95291.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/88.978218a7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/89.72023da6.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/9.d6be3943.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/90.e6deeac1.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/91.a93c671c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/92.5ae6d664.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/93.bcc2cb70.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/94.670ad263.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/95.0841361d.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/96.ca9393fd.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/97.a39083e1.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/98.2620222c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/99.c14dec76.js">
    <link rel="stylesheet" href="/FE-Interview-Questions/assets/css/0.styles.1f0a3964.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/FE-Interview-Questions/" class="home-link router-link-active"><img src="/FE-Interview-Questions/logo.png" alt="FE-Interview" class="logo"> <span class="site-name can-hide">FE-Interview</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/FE-Interview-Questions/docs/base.html" class="nav-link">基础</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/improve.html" class="nav-link">进阶</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/advance.html" class="nav-link">高级</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/excellent.html" class="nav-link">精华</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/simply.html" class="nav-link">简版</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/detail-expain.html" class="nav-link">详解</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/handwritten.html" class="nav-link">手写</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/computed-base.html" class="nav-link">通识</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/comprehensive.html" class="nav-link">综合</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/review.html" class="nav-link">其他</a></div><div class="nav-item"><a href="/FE-Interview-Questions/principle-docs/vue/01-从源码解读Vue生命周期.html" class="nav-link">原理</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/qa.html" class="nav-link">QA</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/interview-experience.html" class="nav-link">面经</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="拓展阅读" class="dropdown-title"><span class="title">拓展阅读</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>专题</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/FE-Interview-Questions/docs/design-pattern.html" class="nav-link">设计模式</a></li><li class="dropdown-subitem"><a href="/FE-Interview-Questions/algorithm/prepare/01-如何系统高效地学习数据结构与算法.html" class="nav-link">数据结构与算法</a></li><li class="dropdown-subitem"><a href="/FE-Interview-Questions/vue-analysis/prepare/" class="nav-link">vue源码</a></li><li class="dropdown-subitem"><a href="/FE-Interview-Questions/browser/part1/lesson01.html" class="nav-link">浏览器</a></li><li class="dropdown-subitem"><a href="/FE-Interview-Questions/http-protocol/base/01-HTTP的前世今生.html" class="nav-link">HTTP</a></li><li class="dropdown-subitem"><a href="/FE-Interview-Questions/ts-axios/chapter1/" class="nav-link">TS</a></li><li class="dropdown-subitem"><a href="/FE-Interview-Questions/compute-docs/Linux.html" class="nav-link">计算机基础</a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://blog.poetries.top/node-learning-notes/notes/base/01-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Node
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://blog.poetries.top/handbook/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  手册
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://blog.poetries.top/css-reference/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  css参考
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/FE-Interview-Questions/docs/base.html" class="nav-link">基础</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/improve.html" class="nav-link">进阶</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/advance.html" class="nav-link">高级</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/excellent.html" class="nav-link">精华</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/simply.html" class="nav-link">简版</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/detail-expain.html" class="nav-link">详解</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/handwritten.html" class="nav-link">手写</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/computed-base.html" class="nav-link">通识</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/comprehensive.html" class="nav-link">综合</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/review.html" class="nav-link">其他</a></div><div class="nav-item"><a href="/FE-Interview-Questions/principle-docs/vue/01-从源码解读Vue生命周期.html" class="nav-link">原理</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/qa.html" class="nav-link">QA</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/interview-experience.html" class="nav-link">面经</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="拓展阅读" class="dropdown-title"><span class="title">拓展阅读</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>专题</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/FE-Interview-Questions/docs/design-pattern.html" class="nav-link">设计模式</a></li><li class="dropdown-subitem"><a href="/FE-Interview-Questions/algorithm/prepare/01-如何系统高效地学习数据结构与算法.html" class="nav-link">数据结构与算法</a></li><li class="dropdown-subitem"><a href="/FE-Interview-Questions/vue-analysis/prepare/" class="nav-link">vue源码</a></li><li class="dropdown-subitem"><a href="/FE-Interview-Questions/browser/part1/lesson01.html" class="nav-link">浏览器</a></li><li class="dropdown-subitem"><a href="/FE-Interview-Questions/http-protocol/base/01-HTTP的前世今生.html" class="nav-link">HTTP</a></li><li class="dropdown-subitem"><a href="/FE-Interview-Questions/ts-axios/chapter1/" class="nav-link">TS</a></li><li class="dropdown-subitem"><a href="/FE-Interview-Questions/compute-docs/Linux.html" class="nav-link">计算机基础</a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://blog.poetries.top/node-learning-notes/notes/base/01-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Node
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://blog.poetries.top/handbook/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  手册
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://blog.poetries.top/css-reference/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  css参考
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div> <!----></nav> <div style="padding-left:1.5rem;"><div class="qr"><img src="/FE-Interview-Questions/assets/img/qr.ee193d28.jpg" alt="poetries" width="120" height="120" loading="lazy"> <p class="we-intro">
    关注公众号，获取更多资讯
  </p></div></div> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>计算机基础知识</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FE-Interview-Questions/compute-docs/Linux.html" class="sidebar-link">Linux</a></li><li><a href="/FE-Interview-Questions/compute-docs/Network.html" class="sidebar-link">Network</a></li><li><a href="/FE-Interview-Questions/compute-docs/OS.html" class="sidebar-link">OS</a></li><li><a href="/FE-Interview-Questions/compute-docs/SQL.html" class="sidebar-link">SQL</a></li><li><a href="/FE-Interview-Questions/compute-docs/MySQL.html" class="sidebar-link">MySQL</a></li><li><a href="/FE-Interview-Questions/compute-docs/Redis.html" class="sidebar-link">Redis</a></li><li><a href="/FE-Interview-Questions/compute-docs/Socket.html" class="active sidebar-link">Socket</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/compute-docs/Socket.html#阻塞式-i-o" class="sidebar-link">阻塞式 I/O</a></li><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/compute-docs/Socket.html#非阻塞式-i-o" class="sidebar-link">非阻塞式 I/O</a></li><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/compute-docs/Socket.html#i-o-复用" class="sidebar-link">I/O 复用</a></li><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/compute-docs/Socket.html#信号驱动-i-o" class="sidebar-link">信号驱动 I/O</a></li><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/compute-docs/Socket.html#异步-i-o" class="sidebar-link">异步 I/O</a></li><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/compute-docs/Socket.html#五大-i-o-模型比较" class="sidebar-link">五大 I/O 模型比较</a></li><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/compute-docs/Socket.html#select" class="sidebar-link">select</a></li><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/compute-docs/Socket.html#poll" class="sidebar-link">poll</a></li><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/compute-docs/Socket.html#比较" class="sidebar-link">比较</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/compute-docs/Socket.html#_1-功能" class="sidebar-link">1. 功能</a></li><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/compute-docs/Socket.html#_2-速度" class="sidebar-link">2. 速度</a></li><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/compute-docs/Socket.html#_3-可移植性" class="sidebar-link">3. 可移植性</a></li></ul></li><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/compute-docs/Socket.html#epoll" class="sidebar-link">epoll</a></li><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/compute-docs/Socket.html#工作模式" class="sidebar-link">工作模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/compute-docs/Socket.html#_1-lt-模式" class="sidebar-link">1. LT 模式</a></li><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/compute-docs/Socket.html#_2-et-模式" class="sidebar-link">2. ET 模式</a></li></ul></li><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/compute-docs/Socket.html#应用场景" class="sidebar-link">应用场景</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/compute-docs/Socket.html#_1-select-应用场景" class="sidebar-link">1. select 应用场景</a></li><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/compute-docs/Socket.html#_2-poll-应用场景" class="sidebar-link">2. poll 应用场景</a></li><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/compute-docs/Socket.html#_3-epoll-应用场景" class="sidebar-link">3. epoll 应用场景</a></li></ul></li></ul></li><li><a href="/FE-Interview-Questions/compute-docs/攻击技术.html" class="sidebar-link">攻击技术</a></li><li><a href="/FE-Interview-Questions/compute-docs/缓存.html" class="sidebar-link">缓存</a></li><li><a href="/FE-Interview-Questions/compute-docs/集群.html" class="sidebar-link">集群</a></li></ul></section></li></ul> </aside> <main class="page"> <div id="container" class="theme-default-content lock"><div class="content__default"><h1 id="一、i-o-模型"><a href="#一、i-o-模型" class="header-anchor">#</a> 一、I/O 模型</h1> <p>一个输入操作通常包括两个阶段：</p> <ul><li>等待数据准备好</li> <li>从内核向进程复制数据</li></ul> <p>对于一个套接字上的输入操作，第一步通常涉及等待数据从网络中到达。当所等待数据到达时，它被复制到内核中的某个缓冲区。第二步就是把数据从内核缓冲区复制到应用进程缓冲区。</p> <p>Unix 有五种 I/O 模型：</p> <ul><li>阻塞式 I/O</li> <li>非阻塞式 I/O</li> <li>I/O 复用（select 和 poll）</li> <li>信号驱动式 I/O（SIGIO）</li> <li>异步 I/O（AIO）</li></ul> <h2 id="阻塞式-i-o"><a href="#阻塞式-i-o" class="header-anchor">#</a> 阻塞式 I/O</h2> <p>应用进程被阻塞，直到数据从内核缓冲区复制到应用进程缓冲区中才返回。</p> <p>应该注意到，在阻塞的过程中，其它应用进程还可以执行，因此阻塞不意味着整个操作系统都被阻塞。因为其它应用进程还可以执行，所以不消耗 CPU 时间，这种模型的 CPU 利用率会比较高。</p> <p>下图中，recvfrom() 用于接收 Socket 传来的数据，并复制到应用进程的缓冲区 buf 中。这里把 recvfrom() 当成系统调用。</p> <div class="language-c extra-class"><pre class="language-c"><code>ssize_t <span class="token function">recvfrom</span><span class="token punctuation">(</span><span class="token keyword">int</span> sockfd<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>buf<span class="token punctuation">,</span> size_t len<span class="token punctuation">,</span> <span class="token keyword">int</span> flags<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">sockaddr</span> <span class="token operator">*</span>src_addr<span class="token punctuation">,</span> socklen_t <span class="token operator">*</span>addrlen<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div align="center"><img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/1492928416812_4.png"></div><br> <h2 id="非阻塞式-i-o"><a href="#非阻塞式-i-o" class="header-anchor">#</a> 非阻塞式 I/O</h2> <p>应用进程执行系统调用之后，内核返回一个错误码。应用进程可以继续执行，但是需要不断的执行系统调用来获知 I/O 是否完成，这种方式称为轮询（polling）。</p> <p>由于 CPU 要处理更多的系统调用，因此这种模型的 CPU 利用率比较低。</p> <div align="center"><img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/1492929000361_5.png"></div><br> <h2 id="i-o-复用"><a href="#i-o-复用" class="header-anchor">#</a> I/O 复用</h2> <p>使用 select 或者 poll 等待数据，并且可以等待多个套接字中的任何一个变为可读。这一过程会被阻塞，当某一个套接字可读时返回，之后再使用 recvfrom 把数据从内核复制到进程中。</p> <p>它可以让单个进程具有处理多个 I/O 事件的能力。又被称为 Event Driven I/O，即事件驱动 I/O。</p> <p>如果一个 Web 服务器没有 I/O 复用，那么每一个 Socket 连接都需要创建一个线程去处理。如果同时有几万个连接，那么就需要创建相同数量的线程。相比于多进程和多线程技术，I/O 复用不需要进程线程创建和切换的开销，系统开销更小。</p> <div align="center"><img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/1492929444818_6.png"></div><br> <h2 id="信号驱动-i-o"><a href="#信号驱动-i-o" class="header-anchor">#</a> 信号驱动 I/O</h2> <p>应用进程使用 sigaction 系统调用，内核立即返回，应用进程可以继续执行，也就是说等待数据阶段应用进程是非阻塞的。内核在数据到达时向应用进程发送 SIGIO 信号，应用进程收到之后在信号处理程序中调用 recvfrom 将数据从内核复制到应用进程中。</p> <p>相比于非阻塞式 I/O 的轮询方式，信号驱动 I/O 的 CPU 利用率更高。</p> <div align="center"><img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/1492929553651_7.png"></div><br> <h2 id="异步-i-o"><a href="#异步-i-o" class="header-anchor">#</a> 异步 I/O</h2> <p>应用进程执行 aio_read 系统调用会立即返回，应用进程可以继续执行，不会被阻塞，内核会在所有操作完成之后向应用进程发送信号。</p> <p>异步 I/O 与信号驱动 I/O 的区别在于，异步 I/O 的信号是通知应用进程 I/O 完成，而信号驱动 I/O 的信号是通知应用进程可以开始 I/O。</p> <div align="center"><img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/1492930243286_8.png"></div><br> <h2 id="五大-i-o-模型比较"><a href="#五大-i-o-模型比较" class="header-anchor">#</a> 五大 I/O 模型比较</h2> <ul><li>同步 I/O：将数据从内核缓冲区复制到应用进程缓冲区的阶段（第二阶段），应用进程会阻塞。</li> <li>异步 I/O：第二阶段应用进程不会阻塞。</li></ul> <p>同步 I/O 包括阻塞式 I/O、非阻塞式 I/O、I/O 复用和信号驱动 I/O ，它们的主要区别在第一个阶段。</p> <p>非阻塞式 I/O 、信号驱动 I/O 和异步 I/O 在第一阶段不会阻塞。</p> <div align="center"><img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/1492928105791_3.png"></div><br> <h1 id="二、i-o-复用"><a href="#二、i-o-复用" class="header-anchor">#</a> 二、I/O 复用</h1> <p>select/poll/epoll 都是 I/O 多路复用的具体实现，select 出现的最早，之后是 poll，再是 epoll。</p> <h2 id="select"><a href="#select" class="header-anchor">#</a> select</h2> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> fd_set <span class="token operator">*</span>readfds<span class="token punctuation">,</span> fd_set <span class="token operator">*</span>writefds<span class="token punctuation">,</span> fd_set <span class="token operator">*</span>exceptfds<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">timeval</span> <span class="token operator">*</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>select 允许应用程序监视一组文件描述符，等待一个或者多个描述符成为就绪状态，从而完成 I/O 操作。</p> <ul><li><p>fd_set 使用数组实现，数组大小使用 FD_SETSIZE 定义，所以只能监听少于 FD_SETSIZE 数量的描述符。有三种类型的描述符类型：readset、writeset、exceptset，分别对应读、写、异常条件的描述符集合。</p></li> <li><p>timeout 为超时参数，调用 select 会一直阻塞直到有描述符的事件到达或者等待的时间超过 timeout。</p></li> <li><p>成功调用返回结果大于 0，出错返回结果为 -1，超时返回结果为 0。</p></li></ul> <div class="language-c extra-class"><pre class="language-c"><code>fd_set fd_in<span class="token punctuation">,</span> fd_out<span class="token punctuation">;</span>
<span class="token keyword">struct</span> <span class="token class-name">timeval</span> tv<span class="token punctuation">;</span>

<span class="token comment">// Reset the sets</span>
<span class="token function">FD_ZERO</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>fd_in <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">FD_ZERO</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>fd_out <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Monitor sock1 for input events</span>
<span class="token function">FD_SET</span><span class="token punctuation">(</span> sock1<span class="token punctuation">,</span> <span class="token operator">&amp;</span>fd_in <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Monitor sock2 for output events</span>
<span class="token function">FD_SET</span><span class="token punctuation">(</span> sock2<span class="token punctuation">,</span> <span class="token operator">&amp;</span>fd_out <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Find out which socket has the largest numeric value as select requires it</span>
<span class="token keyword">int</span> largest_sock <span class="token operator">=</span> sock1 <span class="token operator">&gt;</span> sock2 <span class="token operator">?</span> sock1 <span class="token operator">:</span> sock2<span class="token punctuation">;</span>

<span class="token comment">// Wait up to 10 seconds</span>
tv<span class="token punctuation">.</span>tv_sec <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
tv<span class="token punctuation">.</span>tv_usec <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token comment">// Call the select</span>
<span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token function">select</span><span class="token punctuation">(</span> largest_sock <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>fd_in<span class="token punctuation">,</span> <span class="token operator">&amp;</span>fd_out<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>tv <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Check if select actually succeed</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span>
    <span class="token comment">// report error and abort</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">)</span>
    <span class="token comment">// timeout; no event detected</span>
<span class="token keyword">else</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">FD_ISSET</span><span class="token punctuation">(</span> sock1<span class="token punctuation">,</span> <span class="token operator">&amp;</span>fd_in <span class="token punctuation">)</span> <span class="token punctuation">)</span>
        <span class="token comment">// input event on sock1</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">FD_ISSET</span><span class="token punctuation">(</span> sock2<span class="token punctuation">,</span> <span class="token operator">&amp;</span>fd_out <span class="token punctuation">)</span> <span class="token punctuation">)</span>
        <span class="token comment">// output event on sock2</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="poll"><a href="#poll" class="header-anchor">#</a> poll</h2> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">poll</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">pollfd</span> <span class="token operator">*</span>fds<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span> nfds<span class="token punctuation">,</span> <span class="token keyword">int</span> timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>poll 的功能与 select 类似，也是等待一组描述符中的一个成为就绪状态。</p> <p>poll 中的描述符是 pollfd 类型的数组，pollfd 的定义如下：</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">struct</span> <span class="token class-name">pollfd</span> <span class="token punctuation">{</span>
               <span class="token keyword">int</span>   fd<span class="token punctuation">;</span>         <span class="token comment">/* file descriptor */</span>
               <span class="token keyword">short</span> events<span class="token punctuation">;</span>     <span class="token comment">/* requested events */</span>
               <span class="token keyword">short</span> revents<span class="token punctuation">;</span>    <span class="token comment">/* returned events */</span>
           <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">// The structure for two events</span>
<span class="token keyword">struct</span> <span class="token class-name">pollfd</span> fds<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Monitor sock1 for input</span>
fds<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>fd <span class="token operator">=</span> sock1<span class="token punctuation">;</span>
fds<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>events <span class="token operator">=</span> POLLIN<span class="token punctuation">;</span>

<span class="token comment">// Monitor sock2 for output</span>
fds<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>fd <span class="token operator">=</span> sock2<span class="token punctuation">;</span>
fds<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>events <span class="token operator">=</span> POLLOUT<span class="token punctuation">;</span>

<span class="token comment">// Wait 10 seconds</span>
<span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token function">poll</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>fds<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Check if poll actually succeed</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span>
    <span class="token comment">// report error and abort</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">)</span>
    <span class="token comment">// timeout; no event detected</span>
<span class="token keyword">else</span>
<span class="token punctuation">{</span>
    <span class="token comment">// If we detect the event, zero it out so we can reuse the structure</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> fds<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>revents <span class="token operator">&amp;</span> POLLIN <span class="token punctuation">)</span>
        fds<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>revents <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment">// input event on sock1</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span> fds<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>revents <span class="token operator">&amp;</span> POLLOUT <span class="token punctuation">)</span>
        fds<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>revents <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment">// output event on sock2</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="比较"><a href="#比较" class="header-anchor">#</a> 比较</h2> <h3 id="_1-功能"><a href="#_1-功能" class="header-anchor">#</a> 1. 功能</h3> <p>select 和 poll 的功能基本相同，不过在一些实现细节上有所不同。</p> <ul><li>select 会修改描述符，而 poll 不会；</li> <li>select 的描述符类型使用数组实现，FD_SETSIZE 大小默认为 1024，因此默认只能监听少于 1024 个描述符。如果要监听更多描述符的话，需要修改 FD_SETSIZE 之后重新编译；而 poll 没有描述符数量的限制；</li> <li>poll 提供了更多的事件类型，并且对描述符的重复利用上比 select 高。</li> <li>如果一个线程对某个描述符调用了 select 或者 poll，另一个线程关闭了该描述符，会导致调用结果不确定。</li></ul> <h3 id="_2-速度"><a href="#_2-速度" class="header-anchor">#</a> 2. 速度</h3> <p>select 和 poll 速度都比较慢，每次调用都需要将全部描述符从应用进程缓冲区复制到内核缓冲区。</p> <h3 id="_3-可移植性"><a href="#_3-可移植性" class="header-anchor">#</a> 3. 可移植性</h3> <p>几乎所有的系统都支持 select，但是只有比较新的系统支持 poll。</p> <h2 id="epoll"><a href="#epoll" class="header-anchor">#</a> epoll</h2> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">epoll_create</span><span class="token punctuation">(</span><span class="token keyword">int</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">epoll_ctl</span><span class="token punctuation">(</span><span class="token keyword">int</span> epfd<span class="token punctuation">,</span> <span class="token keyword">int</span> op<span class="token punctuation">,</span> <span class="token keyword">int</span> fd<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">epoll_event</span> <span class="token operator">*</span>event<span class="token punctuation">)</span>；
<span class="token keyword">int</span> <span class="token function">epoll_wait</span><span class="token punctuation">(</span><span class="token keyword">int</span> epfd<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">epoll_event</span> <span class="token operator">*</span> events<span class="token punctuation">,</span> <span class="token keyword">int</span> maxevents<span class="token punctuation">,</span> <span class="token keyword">int</span> timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>epoll_ctl() 用于向内核注册新的描述符或者是改变某个文件描述符的状态。已注册的描述符在内核中会被维护在一棵红黑树上，通过回调函数内核会将 I/O 准备好的描述符加入到一个链表中管理，进程调用 epoll_wait() 便可以得到事件完成的描述符。</p> <p>从上面的描述可以看出，epoll 只需要将描述符从进程缓冲区向内核缓冲区拷贝一次，并且进程不需要通过轮询来获得事件完成的描述符。</p> <p>epoll 仅适用于 Linux OS。</p> <p>epoll 比 select 和 poll 更加灵活而且没有描述符数量限制。</p> <p>epoll 对多线程编程更有友好，一个线程调用了 epoll_wait() 另一个线程关闭了同一个描述符也不会产生像 select 和 poll 的不确定情况。</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">// Create the epoll descriptor. Only one is needed per app, and is used to monitor all sockets.</span>
<span class="token comment">// The function argument is ignored (it was not before, but now it is), so put your favorite number here</span>
<span class="token keyword">int</span> pollingfd <span class="token operator">=</span> <span class="token function">epoll_create</span><span class="token punctuation">(</span> <span class="token number">0xCAFE</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span> pollingfd <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token punctuation">)</span>
 <span class="token comment">// report error</span>

<span class="token comment">// Initialize the epoll structure in case more members are added in future</span>
<span class="token keyword">struct</span> <span class="token class-name">epoll_event</span> ev <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Associate the connection class instance with the event. You can associate anything</span>
<span class="token comment">// you want, epoll does not use this information. We store a connection class pointer, pConnection1</span>
ev<span class="token punctuation">.</span>data<span class="token punctuation">.</span>ptr <span class="token operator">=</span> pConnection1<span class="token punctuation">;</span>

<span class="token comment">// Monitor for input, and do not automatically rearm the descriptor after the event</span>
ev<span class="token punctuation">.</span>events <span class="token operator">=</span> EPOLLIN <span class="token operator">|</span> EPOLLONESHOT<span class="token punctuation">;</span>
<span class="token comment">// Add the descriptor into the monitoring list. We can do it even if another thread is</span>
<span class="token comment">// waiting in epoll_wait - the descriptor will be properly added</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">epoll_ctl</span><span class="token punctuation">(</span> epollfd<span class="token punctuation">,</span> EPOLL_CTL_ADD<span class="token punctuation">,</span> pConnection1<span class="token operator">-&gt;</span><span class="token function">getSocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ev <span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">)</span>
    <span class="token comment">// report error</span>

<span class="token comment">// Wait for up to 20 events (assuming we have added maybe 200 sockets before that it may happen)</span>
<span class="token keyword">struct</span> <span class="token class-name">epoll_event</span> pevents<span class="token punctuation">[</span> <span class="token number">20</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Wait for 10 seconds, and retrieve less than 20 epoll_event and store them into epoll_event array</span>
<span class="token keyword">int</span> ready <span class="token operator">=</span> <span class="token function">epoll_wait</span><span class="token punctuation">(</span> pollingfd<span class="token punctuation">,</span> pevents<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">10000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Check if epoll actually succeed</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span>
    <span class="token comment">// report error and abort</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">)</span>
    <span class="token comment">// timeout; no event detected</span>
<span class="token keyword">else</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Check if any events detected</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ret<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> pevents<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>events <span class="token operator">&amp;</span> EPOLLIN <span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// Get back our connection pointer</span>
            Connection <span class="token operator">*</span> c <span class="token operator">=</span> <span class="token punctuation">(</span>Connection<span class="token operator">*</span><span class="token punctuation">)</span> pevents<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>ptr<span class="token punctuation">;</span>
            c<span class="token operator">-&gt;</span><span class="token function">handleReadEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="工作模式"><a href="#工作模式" class="header-anchor">#</a> 工作模式</h2> <p>epoll 的描述符事件有两种触发模式：LT（level trigger）和 ET（edge trigger）。</p> <h3 id="_1-lt-模式"><a href="#_1-lt-模式" class="header-anchor">#</a> 1. LT 模式</h3> <p>当 epoll_wait() 检测到描述符事件到达时，将此事件通知进程，进程可以不立即处理该事件，下次调用 epoll_wait() 会再次通知进程。是默认的一种模式，并且同时支持 Blocking 和 No-Blocking。</p> <h3 id="_2-et-模式"><a href="#_2-et-模式" class="header-anchor">#</a> 2. ET 模式</h3> <p>和 LT 模式不同的是，通知之后进程必须立即处理事件，下次再调用 epoll_wait() 时不会再得到事件到达的通知。</p> <p>很大程度上减少了 epoll 事件被重复触发的次数，因此效率要比 LT 模式高。只支持 No-Blocking，以避免由于一个文件句柄的阻塞读/阻塞写操作把处理多个文件描述符的任务饿死。</p> <h2 id="应用场景"><a href="#应用场景" class="header-anchor">#</a> 应用场景</h2> <p>很容易产生一种错觉认为只要用 epoll 就可以了，select 和 poll 都已经过时了，其实它们都有各自的使用场景。</p> <h3 id="_1-select-应用场景"><a href="#_1-select-应用场景" class="header-anchor">#</a> 1. select 应用场景</h3> <p>select 的 timeout 参数精度为微秒，而 poll 和 epoll 为毫秒，因此 select 更加适用于实时性要求比较高的场景，比如核反应堆的控制。</p> <p>select 可移植性更好，几乎被所有主流平台所支持。</p> <h3 id="_2-poll-应用场景"><a href="#_2-poll-应用场景" class="header-anchor">#</a> 2. poll 应用场景</h3> <p>poll 没有最大描述符数量的限制，如果平台支持并且对实时性要求不高，应该使用 poll 而不是 select。</p> <h3 id="_3-epoll-应用场景"><a href="#_3-epoll-应用场景" class="header-anchor">#</a> 3. epoll 应用场景</h3> <p>只需要运行在 Linux 平台上，有大量的描述符需要同时轮询，并且这些连接最好是长连接。</p> <p>需要同时监控小于 1000 个描述符，就没有必要使用 epoll，因为这个应用场景下并不能体现 epoll 的优势。</p> <p>需要监控的描述符状态变化多，而且都是非常短暂的，也没有必要使用 epoll。因为 epoll 中的所有描述符都存储在内核中，造成每次需要对描述符的状态改变都需要通过 epoll_ctl() 进行系统调用，频繁系统调用降低效率。并且 epoll 的描述符存储在内核，不容易调试。</p></div> <!----></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/FE-Interview-Questions/compute-docs/Redis.html" class="prev">Redis</a></span> <span class="next"><a href="/FE-Interview-Questions/compute-docs/攻击技术.html">攻击技术</a>
      →
    </span></p></div>  <div class="el-dialog__wrapper" style="display:none;"><div role="dialog" aria-modal="true" aria-label="解锁文章" class="el-dialog" style="margin-top:15vh;width:30%;"><div class="el-dialog__header"><span class="el-dialog__title">解锁文章</span><button type="button" aria-label="Close" class="el-dialog__headerbtn"><i class="el-dialog__close el-icon el-icon-close"></i></button></div><!----><div class="el-dialog__footer"><span class="dialog-footer"><button type="button" class="el-button el-button--default"><!----><!----><span>取 消</span></button> <button type="button" class="el-button el-button--primary"><!----><!----><span>确 定</span></button></span></div></div></div></main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/FE-Interview-Questions/assets/js/app.db76d58b.js" defer></script><script src="/FE-Interview-Questions/assets/js/4.c04b79e0.js" defer></script><script src="/FE-Interview-Questions/assets/js/2.6d7b907f.js" defer></script><script src="/FE-Interview-Questions/assets/js/119.db2335be.js" defer></script><script src="/FE-Interview-Questions/assets/js/10.a6113989.js" defer></script>
  </body>
</html>

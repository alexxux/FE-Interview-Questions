<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TCP协议：如何保证页面文件能被完整送达浏览器 | FE-Interview</title>
    <meta name="description" content="前端面试题整理">
    <link rel="icon" href="/FE-Interview-Questions/logo.png">
  <link rel="manifest" href="/FE-Interview-Questions/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="/FE-Interview-Questions/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/FE-Interview-Questions/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
  <meta name="apple-mobile-web-app-status-bar-style">
  <script src="https://my.openwrite.cn/js/readmore.js"></script>
  <script src="https://blog.poetries.top/img-repo/2020/06/openwrite.js"></script>
    
    <link rel="preload" href="/FE-Interview-Questions/assets/css/0.styles.1f0a3964.css" as="style"><link rel="preload" href="/FE-Interview-Questions/assets/js/app.db76d58b.js" as="script"><link rel="preload" href="/FE-Interview-Questions/assets/js/4.c04b79e0.js" as="script"><link rel="preload" href="/FE-Interview-Questions/assets/js/2.6d7b907f.js" as="script"><link rel="preload" href="/FE-Interview-Questions/assets/js/78.566b5c94.js" as="script"><link rel="preload" href="/FE-Interview-Questions/assets/js/10.a6113989.js" as="script"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/100.d8067be8.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/101.a350090f.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/102.dd74bb0b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/103.96e85615.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/104.8860fe8d.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/105.5060449e.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/106.52f3543d.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/107.eed2df48.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/108.f5eeeaec.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/109.63cfc223.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/11.8f0af893.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/110.9cedbff1.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/111.15d2c791.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/112.d9f2e8f3.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/113.943a191d.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/114.327256d7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/115.73f265a7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/116.77f3ad0e.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/117.b527f1f7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/118.fc8cde8c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/119.db2335be.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/12.92da9ba8.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/120.b1576b0c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/121.65f83d4e.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/122.1b4fb96b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/123.fd228163.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/124.17100659.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/125.f70ea742.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/126.2cc5797b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/127.67bdfa22.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/128.e6fa4e06.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/129.fc38e456.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/13.bf32b537.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/130.196d2d45.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/131.a7a27c39.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/132.ec094691.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/133.be442aff.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/134.54997737.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/135.b7f19c4c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/136.64fd8a5d.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/137.8002f20d.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/138.9f806bc0.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/139.b1978d99.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/14.e928c43f.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/140.6796c6cb.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/141.238c5e80.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/142.1eb05585.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/143.95e4e51e.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/144.41763415.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/145.7e36ac48.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/146.8fe19c11.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/147.385f98d4.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/148.ae2fbb65.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/149.07af4eb2.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/15.d09fa1de.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/150.e5b13f42.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/151.0d853dc4.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/152.d011cfc2.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/153.a2419345.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/154.a75123f9.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/155.f94a2c94.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/156.d6adaa5c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/157.6db8644a.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/158.3c5f0c43.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/159.c82432ec.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/16.8babaffc.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/160.a6ac1263.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/161.44254eeb.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/162.45fbaca0.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/163.adbeb165.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/164.9bd328e7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/165.0d3f47c3.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/166.3a662c5e.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/167.197c69aa.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/168.8d4f086d.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/169.9bc47c36.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/17.ac70b66c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/170.5972aaeb.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/171.dfbe6b8b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/172.45601684.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/173.7b096e5a.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/174.b77855de.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/175.d0652087.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/176.fb152190.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/177.347d78f7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/178.370bd0ac.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/179.7b1c1eb1.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/18.b75d0e84.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/180.a70c954b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/181.fa4c4400.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/182.c9cb10be.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/183.c78b1c44.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/184.c89e7418.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/185.640e69ab.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/186.ca1a9ef5.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/187.8efba6e0.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/188.6ca64a3b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/189.f608d52f.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/19.d5c58541.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/190.d57f3eb5.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/191.a05c25fd.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/192.8be51b8b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/193.032bfc6a.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/194.589d39ef.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/195.62e7d5e7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/196.8651830d.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/197.e1b86448.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/198.8b50cd19.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/199.1e15584e.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/20.05b0c9ba.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/200.53f5e6c1.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/201.f0ee6522.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/202.39471620.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/203.9ac66be9.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/204.b754f56f.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/205.f834c2b1.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/206.b424070c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/207.57a310e0.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/208.46099ca8.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/209.719b4ed4.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/21.3739c65e.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/210.2203edd6.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/211.b3e70b29.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/212.ca435277.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/213.0ecfbb57.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/214.a35a177a.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/215.56309ccd.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/216.0fbe2d67.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/217.4fa39004.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/218.cf1b8f6f.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/219.a6919e1b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/22.cb64eeee.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/220.6be08e86.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/221.6e66b328.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/222.3d3343c7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/223.bca62ea0.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/224.d88fe7a3.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/225.0605fdbb.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/226.f09683a7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/227.c47f8cb3.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/228.4a8c85cd.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/229.d415dabe.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/23.c9028c2f.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/230.956b8a54.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/231.b42d888f.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/232.608af160.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/233.9f4d04a5.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/234.62b5dbac.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/235.880f1ca0.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/236.5a388fcc.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/237.01850bc1.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/238.e1f1a57d.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/239.782f9411.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/24.06c566b5.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/240.e1277e81.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/241.47d108f4.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/242.789ff694.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/243.8cfee24b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/244.db2ca944.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/245.177cdaa7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/246.c0e8dc1f.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/247.06761326.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/248.0575b514.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/249.663ef673.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/25.f585ddec.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/26.967aab3f.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/27.939f8629.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/28.eb79ae67.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/29.f4263a91.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/3.0a1241ca.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/30.27bff004.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/31.06bac762.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/32.a2b81321.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/33.59705419.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/34.2b11800c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/35.20aab597.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/36.de271854.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/37.e14393c9.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/38.a3f56ee3.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/39.5d4a9057.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/40.97cfc1b8.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/41.bb336619.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/42.45f8294b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/43.be8ac190.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/44.07951d1f.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/45.0c1a236c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/46.337aed96.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/47.8a57fa26.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/48.983f89bf.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/49.756f0064.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/5.4cc33d6b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/50.e7c2d109.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/51.7bad69c7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/52.2868dc1d.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/53.554023f8.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/54.f7078d5d.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/55.61ea7e68.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/56.0db38d73.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/57.af65a382.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/58.2a8ddf87.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/59.21046427.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/6.e415a690.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/60.5f39aadd.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/61.5b17645c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/62.5030544b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/63.031693d7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/64.ea4631f2.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/65.3018f7b0.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/66.66704c7f.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/67.da2445c5.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/68.dab9c344.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/69.f3c09412.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/7.49472306.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/70.96ee9389.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/71.a70685e7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/72.95721f6c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/73.61f63e51.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/74.f97b569c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/75.29575c33.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/76.a3d16b7d.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/77.b6794428.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/79.bc8dafa1.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/8.2c95c703.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/80.5cbe4251.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/81.994d7780.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/82.555fb672.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/83.bb39d3fc.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/84.1466543b.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/85.778c0670.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/86.d3b75428.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/87.9cc95291.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/88.978218a7.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/89.72023da6.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/9.d6be3943.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/90.e6deeac1.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/91.a93c671c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/92.5ae6d664.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/93.bcc2cb70.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/94.670ad263.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/95.0841361d.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/96.ca9393fd.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/97.a39083e1.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/98.2620222c.js"><link rel="prefetch" href="/FE-Interview-Questions/assets/js/99.c14dec76.js">
    <link rel="stylesheet" href="/FE-Interview-Questions/assets/css/0.styles.1f0a3964.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container custom-code-highlight"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/FE-Interview-Questions/" class="home-link router-link-active"><img src="/FE-Interview-Questions/logo.png" alt="FE-Interview" class="logo"> <span class="site-name can-hide">FE-Interview</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/FE-Interview-Questions/docs/base.html" class="nav-link">基础</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/improve.html" class="nav-link">进阶</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/advance.html" class="nav-link">高级</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/excellent.html" class="nav-link">精华</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/simply.html" class="nav-link">简版</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/detail-expain.html" class="nav-link">详解</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/handwritten.html" class="nav-link">手写</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/computed-base.html" class="nav-link">通识</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/comprehensive.html" class="nav-link">综合</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/review.html" class="nav-link">其他</a></div><div class="nav-item"><a href="/FE-Interview-Questions/principle-docs/vue/01-从源码解读Vue生命周期.html" class="nav-link">原理</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/qa.html" class="nav-link">QA</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/interview-experience.html" class="nav-link">面经</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="拓展阅读" class="dropdown-title"><span class="title">拓展阅读</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>专题</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/FE-Interview-Questions/docs/design-pattern.html" class="nav-link">设计模式</a></li><li class="dropdown-subitem"><a href="/FE-Interview-Questions/algorithm/prepare/01-如何系统高效地学习数据结构与算法.html" class="nav-link">数据结构与算法</a></li><li class="dropdown-subitem"><a href="/FE-Interview-Questions/vue-analysis/prepare/" class="nav-link">vue源码</a></li><li class="dropdown-subitem"><a href="/FE-Interview-Questions/browser/part1/lesson01.html" class="nav-link">浏览器</a></li><li class="dropdown-subitem"><a href="/FE-Interview-Questions/http-protocol/base/01-HTTP的前世今生.html" class="nav-link">HTTP</a></li><li class="dropdown-subitem"><a href="/FE-Interview-Questions/ts-axios/chapter1/" class="nav-link">TS</a></li><li class="dropdown-subitem"><a href="/FE-Interview-Questions/compute-docs/Linux.html" class="nav-link">计算机基础</a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://blog.poetries.top/node-learning-notes/notes/base/01-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Node
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://blog.poetries.top/handbook/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  手册
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://blog.poetries.top/css-reference/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  css参考
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/FE-Interview-Questions/docs/base.html" class="nav-link">基础</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/improve.html" class="nav-link">进阶</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/advance.html" class="nav-link">高级</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/excellent.html" class="nav-link">精华</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/simply.html" class="nav-link">简版</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/detail-expain.html" class="nav-link">详解</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/handwritten.html" class="nav-link">手写</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/computed-base.html" class="nav-link">通识</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/comprehensive.html" class="nav-link">综合</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/review.html" class="nav-link">其他</a></div><div class="nav-item"><a href="/FE-Interview-Questions/principle-docs/vue/01-从源码解读Vue生命周期.html" class="nav-link">原理</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/qa.html" class="nav-link">QA</a></div><div class="nav-item"><a href="/FE-Interview-Questions/docs/interview-experience.html" class="nav-link">面经</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="拓展阅读" class="dropdown-title"><span class="title">拓展阅读</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>专题</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/FE-Interview-Questions/docs/design-pattern.html" class="nav-link">设计模式</a></li><li class="dropdown-subitem"><a href="/FE-Interview-Questions/algorithm/prepare/01-如何系统高效地学习数据结构与算法.html" class="nav-link">数据结构与算法</a></li><li class="dropdown-subitem"><a href="/FE-Interview-Questions/vue-analysis/prepare/" class="nav-link">vue源码</a></li><li class="dropdown-subitem"><a href="/FE-Interview-Questions/browser/part1/lesson01.html" class="nav-link">浏览器</a></li><li class="dropdown-subitem"><a href="/FE-Interview-Questions/http-protocol/base/01-HTTP的前世今生.html" class="nav-link">HTTP</a></li><li class="dropdown-subitem"><a href="/FE-Interview-Questions/ts-axios/chapter1/" class="nav-link">TS</a></li><li class="dropdown-subitem"><a href="/FE-Interview-Questions/compute-docs/Linux.html" class="nav-link">计算机基础</a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://blog.poetries.top/node-learning-notes/notes/base/01-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Node
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://blog.poetries.top/handbook/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  手册
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://blog.poetries.top/css-reference/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  css参考
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div> <!----></nav> <div style="padding-left:1.5rem;"><div class="qr"><img src="/FE-Interview-Questions/assets/img/qr.ee193d28.jpg" alt="poetries" width="120" height="120" loading="lazy"> <p class="we-intro">
    关注公众号，获取更多资讯
  </p></div></div> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>宏观视角上的浏览器</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FE-Interview-Questions/browser/part1/lesson01.html" class="sidebar-link">Chrome架构：仅仅打开了1个页面，为什么有4个进程</a></li><li><a href="/FE-Interview-Questions/browser/part1/lesson02.html" class="active sidebar-link">TCP协议：如何保证页面文件能被完整送达浏览器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/browser/part1/lesson02.html#一个数据包的“旅程”" class="sidebar-link">一个数据包的“旅程”</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/browser/part1/lesson02.html#_1-ip：把数据包送达目的主机" class="sidebar-link">1. IP：把数据包送达目的主机</a></li><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/browser/part1/lesson02.html#_2-udp：把数据包送达应用程序" class="sidebar-link">2. UDP：把数据包送达应用程序</a></li><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/browser/part1/lesson02.html#_3-tcp：把数据完整地送达应用程序" class="sidebar-link">3. TCP：把数据完整地送达应用程序</a></li></ul></li><li class="sidebar-sub-header"><a href="/FE-Interview-Questions/browser/part1/lesson02.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/FE-Interview-Questions/browser/part1/lesson03.html" class="sidebar-link">HTTP请求流程：为什么很多站点第二次打开速度会很快</a></li><li><a href="/FE-Interview-Questions/browser/part1/lesson04.html" class="sidebar-link">导航流程：从输入URL到页面展示这中间发生了什么</a></li><li><a href="/FE-Interview-Questions/browser/part1/lesson05.html" class="sidebar-link">渲染流程（上）：HTML、CSS和JavaScript是如何变成页面的</a></li><li><a href="/FE-Interview-Questions/browser/part1/lesson06.html" class="sidebar-link">渲染流程（下）：HTML、CSS和JavaScript是如何变成页面的</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>浏览器中的JavaScript执行机制</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FE-Interview-Questions/browser/part2/lesson07.html" class="sidebar-link">变量提升：JavaScript代码是按顺序执行的吗</a></li><li><a href="/FE-Interview-Questions/browser/part2/lesson08.html" class="sidebar-link">调用栈：为什么JavaScript代码会出现栈溢出</a></li><li><a href="/FE-Interview-Questions/browser/part2/lesson09.html" class="sidebar-link">块级作用域：var缺陷以及为什么要引入let和const</a></li><li><a href="/FE-Interview-Questions/browser/part2/lesson10.html" class="sidebar-link">作用域链和闭包：代码中出现相同的变量，JavaScript引擎如何选择</a></li><li><a href="/FE-Interview-Questions/browser/part2/lesson11.html" class="sidebar-link">this：从JavaScript执行上下文视角讲this</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>V8工作原理</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FE-Interview-Questions/browser/part3/lesson12.html" class="sidebar-link">栈空间和堆空间：数据是如何存储的</a></li><li><a href="/FE-Interview-Questions/browser/part3/lesson13.html" class="sidebar-link">垃圾回收：垃圾数据如何自动回收</a></li><li><a href="/FE-Interview-Questions/browser/part3/lesson14.html" class="sidebar-link">编译器和解析器：V8如何执行一段JavaScript代码的</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>浏览器中的页面循环系统</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FE-Interview-Questions/browser/part4/lesson15.html" class="sidebar-link">消息队列和事件循环：页面是怎么活起来的</a></li><li><a href="/FE-Interview-Questions/browser/part4/lesson16.html" class="sidebar-link">Webapi：setTimeout是怎么实现的</a></li><li><a href="/FE-Interview-Questions/browser/part4/lesson17.html" class="sidebar-link">Webapi：XMLHttpRequest是怎么实现的</a></li><li><a href="/FE-Interview-Questions/browser/part4/lesson18.html" class="sidebar-link">宏任务和微任务：不是所有的任务都是一个待遇</a></li><li><a href="/FE-Interview-Questions/browser/part4/lesson19.html" class="sidebar-link">使用Promise告别回调函数</a></li><li><a href="/FE-Interview-Questions/browser/part4/lesson20.html" class="sidebar-link">async await使用同步方式写异步代码</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>浏览器中的页面</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FE-Interview-Questions/browser/part5/lesson21.html" class="sidebar-link">页面性能分析：利用chrome做web性能分析</a></li><li><a href="/FE-Interview-Questions/browser/part5/lesson22.html" class="sidebar-link">DOM树：JavaScript是如何影响DOM树构建的</a></li><li><a href="/FE-Interview-Questions/browser/part5/lesson23.html" class="sidebar-link">渲染流水线：CSS如何影响首次加载时的白屏时间？</a></li><li><a href="/FE-Interview-Questions/browser/part5/lesson24.html" class="sidebar-link">分层和合成机制：为什么css动画比JavaScript高效</a></li><li><a href="/FE-Interview-Questions/browser/part5/lesson25.html" class="sidebar-link">页面性能：如何系统优化页面</a></li><li><a href="/FE-Interview-Questions/browser/part5/lesson26.html" class="sidebar-link">虚拟DOM：虚拟DOM和实际DOM有何不同</a></li><li><a href="/FE-Interview-Questions/browser/part5/lesson27.html" class="sidebar-link">PWA：解决了web应用哪些问题</a></li><li><a href="/FE-Interview-Questions/browser/part5/lesson28.html" class="sidebar-link">webComponent：像搭积木一样构建web应用</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>浏览器中的网络</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FE-Interview-Questions/browser/part6/lesson29.html" class="sidebar-link">HTTP1：HTTP性能优化</a></li><li><a href="/FE-Interview-Questions/browser/part6/lesson30.html" class="sidebar-link">HTTP2：如何提升网络速度</a></li><li><a href="/FE-Interview-Questions/browser/part6/lesson31.html" class="sidebar-link">HTTP3：甩掉TCP、TCL包袱 构建高效网络</a></li><li><a href="/FE-Interview-Questions/browser/part6/lesson32.html" class="sidebar-link">同源策略：为什么XMLHttpRequst不能跨域请求资源</a></li><li><a href="/FE-Interview-Questions/browser/part6/lesson33.html" class="sidebar-link">跨站脚本攻击XSS：为什么cookie中有httpOnly属性</a></li><li><a href="/FE-Interview-Questions/browser/part6/lesson34.html" class="sidebar-link">CSRF攻击：陌生链接不要随便点</a></li><li><a href="/FE-Interview-Questions/browser/part6/lesson35.html" class="sidebar-link">沙盒：页面和系统之间的隔离墙</a></li><li><a href="/FE-Interview-Questions/browser/part6/lesson36.html" class="sidebar-link">HTTPS：让数据传输更安全</a></li></ul></section></li></ul> </aside> <main class="page"> <div id="container" class="theme-default-content lock"><div class="content__default"><h1 id="tcp协议：如何保证页面文件能被完整送达浏览器"><a href="#tcp协议：如何保证页面文件能被完整送达浏览器" class="header-anchor">#</a> TCP协议：如何保证页面文件能被完整送达浏览器</h1> <p>在衡量Web页面性能的时候有一个重要的指标叫“FP（First Paint）”，是指从页面加载到首次开始绘制的时长。这个指标直接影响了用户的跳出率，更快的页面响应意味着更多的PV、更高的参与度，以及更高的转化率。那什么影响FP指标呢？其中一个重要的因素是网络加载速度</p> <p>要想优化Web页面的加载速度，你需要对网络有充分的了解。而理解网络的关键是要对网络协议有深刻的认识，不管你是使用HTTP，还是使用WebSocket，它们都是基于TCP/IP的，如果你对这些原理有足够了解，也就清楚如何去优化Web性能，或者能更轻松地定位Web问题了。此外，TCP/IP的设计思想还有助于拓宽你的知识边界，从而在整体上提升你对项目的理解和解决问题的能力。</p> <p>好，接下来我们回到正题，开始今天的内容。在网络中，一个文件通常会被拆分为很多数据包来进行传输，而数据包在传输过程中又有很大概率丢失或者出错。那么如何保证页面文件能被完整地送达浏览器呢？</p> <p>这篇文章将站在数据包的视角，给出问题答案</p> <h2 id="一个数据包的“旅程”"><a href="#一个数据包的“旅程”" class="header-anchor">#</a> 一个数据包的“旅程”</h2> <p>下面我将分别从“数据包如何送达主机”“主机如何将数据包转交给应用”和“数据是如何被完整地送达应用程序”这三个角度来为你讲述数据的传输过程</p> <p><strong>互联网，实际上是一套理念和协议组成的体系架构</strong>。其中，协议是一套众所周知的规则和标准，如果各方都同意使用，那么它们之间的通信将变得毫无障碍</p> <p>互联网中的数据是通过数据包来传输的。如果发送的数据很大，那么该数据就会被拆分为很多小数据包来传输。比如你现在听的音频数据，是拆分成一个个小的数据包来传输的，并不是一个大的文件一次传输过来的</p> <h3 id="_1-ip：把数据包送达目的主机"><a href="#_1-ip：把数据包送达目的主机" class="header-anchor">#</a> 1. IP：把数据包送达目的主机</h3> <p>数据包要在互联网上进行传输，就要符合网际协议（Internet Protocol，简称IP）标准。互联网上不同的在线设备都有唯一的地址，地址只是一个数字，这和大部分家庭收件地址类似，你只需要知道一个家庭的具体地址，就可以往这个地址发送包裹，这样物流系统就能把物品送到目的地</p> <p><strong>计算机的地址就称为IP地址，访问任何网站实际上只是你的计算机向另外一台计算机请求信息。</strong></p> <p>如果要想把一个数据包从主机A发送给主机B，那么在传输之前，数据包上会被附加上主机B的IP地址信息，这样在传输过程中才能正确寻址。额外地，数据包上还会附加上主机A本身的IP地址，有了这些信息主机B才可以回复信息给主机A。这些附加的信息会被装进一个叫IP头的数据结构里。IP头是IP数据包开头的信息，包含IP版本、源IP地址、目标IP地址、生存时间等信息</p> <p>为了方便理解，我先把网络简单分为三层结构，如下图</p> <p><img src="https://static001.geekbang.org/resource/image/00/4d/00d9bcad0bda1fdb43ead428e89ae74d.png" alt=""></p> <blockquote><p>下面我们一起来看下一个数据包从主机A到主机B的旅程：</p></blockquote> <ul><li>上层将含有“极客时间”的数据包交给网络层；</li> <li>网络层再将IP头附加到数据包上，组成新的 IP数据包，并交给底层；</li> <li>底层通过物理网络将数据包传输给主机B；</li> <li>数据包被传输到主机B的网络层，在这里主机B拆开数据包的IP头信息，并将拆开来的数据部分交给上层；</li> <li>最终，含有“极客时间”信息的数据包就到达了主机B的上层了</li></ul> <h3 id="_2-udp：把数据包送达应用程序"><a href="#_2-udp：把数据包送达应用程序" class="header-anchor">#</a> 2. UDP：把数据包送达应用程序</h3> <p>IP是非常底层的协议，只负责把数据包传送到对方电脑，但是对方电脑并不知道把数据包交给哪个程序，是交给浏览器还是交给王者荣耀？因此，需要基于IP之上开发能和应用打交道的协议，最常见的是“用户数据包协议（User Datagram Protocol）”，简称UDP。</p> <p>UDP中一个最重要的信息是端口号，端口号其实就是一个数字，每个想访问网络的程序都需要绑定一个端口号。通过端口号UDP就能把指定的数据包发送给指定的程序了，所以IP通过IP地址信息把数据包发送给指定的电脑，而UDP通过端口号把数据包分发给正确的程序。和IP头一样，端口号会被装进UDP头里面，UDP头再和原始数据包合并组成新的UDP数据包。UDP头中除了目的端口，还有源端口号等信息</p> <p>为了支持UDP协议，我把前面的三层结构扩充为四层结构，在网络层和上层之间增加了传输层，如下图所示：</p> <p><img src="https://static001.geekbang.org/resource/image/3e/ea/3edb673a43f23d84253c52124ce447ea.png" alt=""></p> <p>下面我们一起来看下一个数据包从主机A旅行到主机B的路线：</p> <ul><li>上层将含有“极客时间”的数据包交给传输层；</li> <li>传输层会在数据包前面附加上UDP头，组成新的UDP数据包，再将新的UDP数据包交给网络层；</li> <li>网络层再将IP头附加到数据包上，组成新的IP数据包，并交给底层；</li> <li>数据包被传输到主机B的网络层，在这里主机B拆开IP头信息，并将拆开来的数据部分交给传输层；</li> <li>在传输层，数据包中的UDP头会被拆开，并根据UDP中所提供的端口号，把数据部分交给上层的应用程序；</li> <li>最终，含有“极客时间”信息的数据包就旅行到了主机B上层应用程序这里</li></ul> <p>在使用UDP发送数据时，有各种因素会导致数据包出错，虽然UDP可以校验数据是否正确，但是对于错误的数据包，UDP并不提供重发机制，只是丢弃当前的包，而且UDP在发送之后也无法知道是否能达到目的地。</p> <p>虽说UDP不能保证数据可靠性，但是传输速度却非常快，所以UDP会应用在一些关注速度、但不那么严格要求数据完整性的领域，如在线视频、互动游戏等</p> <h3 id="_3-tcp：把数据完整地送达应用程序"><a href="#_3-tcp：把数据完整地送达应用程序" class="header-anchor">#</a> 3. TCP：把数据完整地送达应用程序</h3> <p>对于浏览器请求，或者邮件这类要求数据传输可靠性（reliability）的应用，如果使用UDP来传输会存在两个问题：</p> <ul><li>数据包在传输过程中容易丢失；</li> <li>大文件会被拆分成很多小的数据包来传输，这些小的数据包会经过不同的路由，并在不同的时间到达接收端，而UDP协议并不知道如何组装这些数据包，从而把这些数据包还原成完整的文件</li></ul> <p>基于这两个问题，我们引入TCP了。TCP（Transmission Control Protocol，传输控制协议）是一种面向连接的、可靠的、基于字节流的传输层通信协议。相对于UDP，TCP有下面两个特点:</p> <ul><li>对于数据包丢失的情况，TCP提供重传机制；</li> <li>TCP引入了数据包排序机制，用来保证把乱序的数据包组合成一个完整的文件。</li></ul> <p>和UDP头一样，TCP头除了包含了目标端口和本机端口号外，还提供了用于排序的序列号，以便接收端通过序号来重排数据包。</p> <p>下面看看TCP下的单个数据包的传输流程</p> <p><img src="https://static001.geekbang.org/resource/image/94/32/943ac29f7d5b45a8861b0cde5da99032.png" alt=""></p> <p>通过上图你应该可以了解一个数据包是如何通过TCP来传输的。TCP单个数据包的传输流程和UDP流程差不多，不同的地方在于，通过TCP头的信息保证了一块大的数据传输的完整性。</p> <p>下面我们再看下完整的TCP连接过程，通过这个过程你可以明白TCP是如何保证重传机制和数据包的排序功能的。</p> <p>从下图可以看出，一个完整的TCP连接的生命周期包括了“建立连接”“传输数据”和“断开连接”三个阶段。</p> <p><img src="https://static001.geekbang.org/resource/image/44/44/440ee50de56edc27c6b3c992b3a25844.png" alt=""></p> <ul><li><strong>首先，建立连接阶段</strong>。这个阶段是通过“三次握手”来建立客户端和服务器之间的连接。TCP 提供面向连接的通信传输。面向连接是指在数据通信开始之前先做好两端之间的准备工作。所谓三次握手，是指在建立一个TCP连接时，客户端和服务器总共要发送三个数据包以确认连接的建立。</li> <li><strong>其次，传输数据阶段</strong>。在该阶段，接收端需要对每个数据包进行确认操作，也就是接收端在接收到数据包之后，需要发送确认数据包给发送端。所以当发送端发送了一个数据包之后，在规定时间内没有接收到接收端反馈的确认消息，则判断为数据包丢失，并触发发送端的重发机制。同样，一个大的文件在传输过程中会被拆分成很多小的数据包，这些数据包到达接收端后，接收端会按照TCP头中的序号为其排序，从而保证组成完整的数据。</li> <li><strong>最后，断开连接阶段</strong>。数据传输完毕之后，就要终止连接了，涉及到最后一个阶段“四次挥手”来保证双方都能断开连接</li></ul> <p>到这里你应该就明白了，TCP为了保证数据传输的可靠性，牺牲了数据包的传输速度，因为“三次握手”和“数据包校验机制”等把传输过程中的数据包的数量提高了一倍。</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>好了，这一节就到这里，下面我来做一个简单的总结。</p> <ul><li>互联网中的数据是通过数据包来传输的，数据包在传输过程中容易丢失或出错。</li> <li>IP负责把数据包送达目的主机。</li> <li>UDP负责把数据包送达具体应用。</li> <li>而TCP保证了数据完整地传输，它的连接可分为三个阶段：建立连接、传输数据和断开连接。</li> <li>其实了解TCP协议，是为了全方位了解HTTP，包括其实际功能和局限性，之后才会更加深刻地理解为什么要推出HTTP/2，以及为什么要推出QUIC协议，也就是未来的HTTP/3。这是一个由浅入深、循序渐进的过程，我希望你能稳扎稳打，学好这每一步、每一个协议，后面“水到自然渠成”</li></ul></div> <!----></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/FE-Interview-Questions/browser/part1/lesson01.html" class="prev">Chrome架构：仅仅打开了1个页面，为什么有4个进程</a></span> <span class="next"><a href="/FE-Interview-Questions/browser/part1/lesson03.html">HTTP请求流程：为什么很多站点第二次打开速度会很快</a>
      →
    </span></p></div>  <div class="el-dialog__wrapper" style="display:none;"><div role="dialog" aria-modal="true" aria-label="解锁文章" class="el-dialog" style="margin-top:15vh;width:30%;"><div class="el-dialog__header"><span class="el-dialog__title">解锁文章</span><button type="button" aria-label="Close" class="el-dialog__headerbtn"><i class="el-dialog__close el-icon el-icon-close"></i></button></div><!----><div class="el-dialog__footer"><span class="dialog-footer"><button type="button" class="el-button el-button--default"><!----><!----><span>取 消</span></button> <button type="button" class="el-button el-button--primary"><!----><!----><span>确 定</span></button></span></div></div></div></main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/FE-Interview-Questions/assets/js/app.db76d58b.js" defer></script><script src="/FE-Interview-Questions/assets/js/4.c04b79e0.js" defer></script><script src="/FE-Interview-Questions/assets/js/2.6d7b907f.js" defer></script><script src="/FE-Interview-Questions/assets/js/78.566b5c94.js" defer></script><script src="/FE-Interview-Questions/assets/js/10.a6113989.js" defer></script>
  </body>
</html>
